// AUTO-GENERATED by scripts/codegen.ts â€” do not edit

import type { Interpreter, RuntimeEntry } from "@mvfm/core";

export const NODE_TO_METHOD_CHAT: Record<string, string> = {
  "slack/chat_appendStream": "chat.appendStream",
  "slack/chat_delete": "chat.delete",
  "slack/chat_deleteScheduledMessage": "chat.deleteScheduledMessage",
  "slack/chat_getPermalink": "chat.getPermalink",
  "slack/chat_meMessage": "chat.meMessage",
  "slack/chat_postEphemeral": "chat.postEphemeral",
  "slack/chat_postMessage": "chat.postMessage",
  "slack/chat_scheduleMessage": "chat.scheduleMessage",
  "slack/chat_scheduledMessages_list": "chat.scheduledMessages.list",
  "slack/chat_startStream": "chat.startStream",
  "slack/chat_stopStream": "chat.stopStream",
  "slack/chat_unfurl": "chat.unfurl",
  "slack/chat_update": "chat.update",
};

interface SlackClientLike {
  apiCall(method: string, params?: Record<string, unknown>): Promise<unknown>;
}

export function createSlackChatInterpreter(client: SlackClientLike): Interpreter {
  const handlers: Interpreter = {};

  for (const [kind, method] of Object.entries(NODE_TO_METHOD_CHAT)) {
    handlers[kind] = async function* (entry: RuntimeEntry) {
      const params = entry.children.length > 0 ? yield 0 : undefined;
      return await client.apiCall(method, params as Record<string, unknown>);
    };
  }

  return handlers;
}
