// AUTO-GENERATED by scripts/codegen.ts â€” do not edit

import type { Interpreter, TypedNode } from "@mvfm/core";
import { defineInterpreter, eval_ } from "@mvfm/core";
import type { SLACK_NODE_KINDS_TEAM } from "./node-kinds-team";

type SlackTeamKind = (typeof SLACK_NODE_KINDS_TEAM)[number];

interface SlackTeamBaseNode<K extends SlackTeamKind = SlackTeamKind> extends TypedNode<unknown> {
  kind: K;
  params?: TypedNode<Record<string, unknown>> | null;
  config: { token: string };
}

export interface SlackTeamAccessLogsNode extends SlackTeamBaseNode<"slack/team_accessLogs"> {}
export interface SlackTeamBillableInfoNode extends SlackTeamBaseNode<"slack/team_billableInfo"> {}
export interface SlackTeamBillingInfoNode extends SlackTeamBaseNode<"slack/team_billing_info"> {}
export interface SlackTeamExternalTeamsDisconnectNode
  extends SlackTeamBaseNode<"slack/team_externalTeams_disconnect"> {}
export interface SlackTeamExternalTeamsListNode
  extends SlackTeamBaseNode<"slack/team_externalTeams_list"> {}
export interface SlackTeamInfoNode extends SlackTeamBaseNode<"slack/team_info"> {}
export interface SlackTeamIntegrationLogsNode
  extends SlackTeamBaseNode<"slack/team_integrationLogs"> {}
export interface SlackTeamPreferencesListNode
  extends SlackTeamBaseNode<"slack/team_preferences_list"> {}
export interface SlackTeamProfileGetNode extends SlackTeamBaseNode<"slack/team_profile_get"> {}

export const NODE_TO_METHOD_TEAM: Record<string, string> = {
  "slack/team_accessLogs": "team.accessLogs",
  "slack/team_billableInfo": "team.billableInfo",
  "slack/team_billing_info": "team.billing.info",
  "slack/team_externalTeams_disconnect": "team.externalTeams.disconnect",
  "slack/team_externalTeams_list": "team.externalTeams.list",
  "slack/team_info": "team.info",
  "slack/team_integrationLogs": "team.integrationLogs",
  "slack/team_preferences_list": "team.preferences.list",
  "slack/team_profile_get": "team.profile.get",
};

declare module "@mvfm/core" {
  interface NodeTypeMap {
    "slack/team_accessLogs": SlackTeamAccessLogsNode;
    "slack/team_billableInfo": SlackTeamBillableInfoNode;
    "slack/team_billing_info": SlackTeamBillingInfoNode;
    "slack/team_externalTeams_disconnect": SlackTeamExternalTeamsDisconnectNode;
    "slack/team_externalTeams_list": SlackTeamExternalTeamsListNode;
    "slack/team_info": SlackTeamInfoNode;
    "slack/team_integrationLogs": SlackTeamIntegrationLogsNode;
    "slack/team_preferences_list": SlackTeamPreferencesListNode;
    "slack/team_profile_get": SlackTeamProfileGetNode;
  }
}

interface SlackClientLike {
  apiCall(method: string, params?: Record<string, unknown>): Promise<unknown>;
}

export function createSlackTeamInterpreter(client: SlackClientLike): Interpreter {
  const handler = async function* (node: SlackTeamBaseNode) {
    const method = NODE_TO_METHOD_TEAM[node.kind];
    if (!method) throw new Error(`Slack interpreter: unknown node kind "${node.kind}"`);
    const params = node.params != null ? yield* eval_(node.params) : undefined;
    return await client.apiCall(method, params);
  };

  return defineInterpreter<SlackTeamKind>()({
    "slack/team_accessLogs": async function* (node: SlackTeamAccessLogsNode) {
      return yield* handler(node);
    },
    "slack/team_billableInfo": async function* (node: SlackTeamBillableInfoNode) {
      return yield* handler(node);
    },
    "slack/team_billing_info": async function* (node: SlackTeamBillingInfoNode) {
      return yield* handler(node);
    },
    "slack/team_externalTeams_disconnect": async function* (
      node: SlackTeamExternalTeamsDisconnectNode,
    ) {
      return yield* handler(node);
    },
    "slack/team_externalTeams_list": async function* (node: SlackTeamExternalTeamsListNode) {
      return yield* handler(node);
    },
    "slack/team_info": async function* (node: SlackTeamInfoNode) {
      return yield* handler(node);
    },
    "slack/team_integrationLogs": async function* (node: SlackTeamIntegrationLogsNode) {
      return yield* handler(node);
    },
    "slack/team_preferences_list": async function* (node: SlackTeamPreferencesListNode) {
      return yield* handler(node);
    },
    "slack/team_profile_get": async function* (node: SlackTeamProfileGetNode) {
      return yield* handler(node);
    },
  });
}
