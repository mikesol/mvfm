// AUTO-GENERATED by scripts/codegen.ts â€” do not edit

import type { Interpreter, TypedNode } from "@mvfm/core";
import { defineInterpreter, eval_ } from "@mvfm/core";
import type { SLACK_NODE_KINDS_ADMIN_WORKFLOWS } from "./node-kinds-admin-workflows";

type SlackAdminWorkflowsKind = (typeof SLACK_NODE_KINDS_ADMIN_WORKFLOWS)[number];

interface SlackAdminWorkflowsBaseNode<K extends SlackAdminWorkflowsKind = SlackAdminWorkflowsKind>
  extends TypedNode<unknown> {
  kind: K;
  params?: TypedNode<Record<string, unknown>> | null;
  config: { token: string };
}

export interface SlackAdminWorkflowsCollaboratorsAddNode
  extends SlackAdminWorkflowsBaseNode<"slack/admin_workflows_collaborators_add"> {}
export interface SlackAdminWorkflowsCollaboratorsRemoveNode
  extends SlackAdminWorkflowsBaseNode<"slack/admin_workflows_collaborators_remove"> {}
export interface SlackAdminWorkflowsPermissionsLookupNode
  extends SlackAdminWorkflowsBaseNode<"slack/admin_workflows_permissions_lookup"> {}
export interface SlackAdminWorkflowsSearchNode
  extends SlackAdminWorkflowsBaseNode<"slack/admin_workflows_search"> {}
export interface SlackAdminWorkflowsUnpublishNode
  extends SlackAdminWorkflowsBaseNode<"slack/admin_workflows_unpublish"> {}

export const NODE_TO_METHOD_ADMIN_WORKFLOWS: Record<string, string> = {
  "slack/admin_workflows_collaborators_add": "admin.workflows.collaborators.add",
  "slack/admin_workflows_collaborators_remove": "admin.workflows.collaborators.remove",
  "slack/admin_workflows_permissions_lookup": "admin.workflows.permissions.lookup",
  "slack/admin_workflows_search": "admin.workflows.search",
  "slack/admin_workflows_unpublish": "admin.workflows.unpublish",
};

declare module "@mvfm/core" {
  interface NodeTypeMap {
    "slack/admin_workflows_collaborators_add": SlackAdminWorkflowsCollaboratorsAddNode;
    "slack/admin_workflows_collaborators_remove": SlackAdminWorkflowsCollaboratorsRemoveNode;
    "slack/admin_workflows_permissions_lookup": SlackAdminWorkflowsPermissionsLookupNode;
    "slack/admin_workflows_search": SlackAdminWorkflowsSearchNode;
    "slack/admin_workflows_unpublish": SlackAdminWorkflowsUnpublishNode;
  }
}

interface SlackClientLike {
  apiCall(method: string, params?: Record<string, unknown>): Promise<unknown>;
}

export function createSlackAdminWorkflowsInterpreter(client: SlackClientLike): Interpreter {
  const handler = async function* (node: SlackAdminWorkflowsBaseNode) {
    const method = NODE_TO_METHOD_ADMIN_WORKFLOWS[node.kind];
    if (!method) throw new Error(`Slack interpreter: unknown node kind "${node.kind}"`);
    const params = node.params != null ? yield* eval_(node.params) : undefined;
    return await client.apiCall(method, params);
  };

  return defineInterpreter<SlackAdminWorkflowsKind>()({
    "slack/admin_workflows_collaborators_add": async function* (
      node: SlackAdminWorkflowsCollaboratorsAddNode,
    ) {
      return yield* handler(node);
    },
    "slack/admin_workflows_collaborators_remove": async function* (
      node: SlackAdminWorkflowsCollaboratorsRemoveNode,
    ) {
      return yield* handler(node);
    },
    "slack/admin_workflows_permissions_lookup": async function* (
      node: SlackAdminWorkflowsPermissionsLookupNode,
    ) {
      return yield* handler(node);
    },
    "slack/admin_workflows_search": async function* (node: SlackAdminWorkflowsSearchNode) {
      return yield* handler(node);
    },
    "slack/admin_workflows_unpublish": async function* (node: SlackAdminWorkflowsUnpublishNode) {
      return yield* handler(node);
    },
  });
}
