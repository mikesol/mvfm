// AUTO-GENERATED by scripts/codegen.ts â€” do not edit

import type { Interpreter, TypedNode } from "@mvfm/core";
import { defineInterpreter, eval_ } from "@mvfm/core";
import type { SLACK_NODE_KINDS_USERS } from "./node-kinds-users";

type SlackUsersKind = (typeof SLACK_NODE_KINDS_USERS)[number];

interface SlackUsersBaseNode<K extends SlackUsersKind = SlackUsersKind> extends TypedNode<unknown> {
  kind: K;
  params?: TypedNode<Record<string, unknown>> | null;
  config: { token: string };
}

export interface SlackUsersConversationsNode
  extends SlackUsersBaseNode<"slack/users_conversations"> {}
export interface SlackUsersDeletePhotoNode extends SlackUsersBaseNode<"slack/users_deletePhoto"> {}
export interface SlackUsersDiscoverableContactsLookupNode
  extends SlackUsersBaseNode<"slack/users_discoverableContacts_lookup"> {}
export interface SlackUsersGetPresenceNode extends SlackUsersBaseNode<"slack/users_getPresence"> {}
export interface SlackUsersIdentityNode extends SlackUsersBaseNode<"slack/users_identity"> {}
export interface SlackUsersInfoNode extends SlackUsersBaseNode<"slack/users_info"> {}
export interface SlackUsersListNode extends SlackUsersBaseNode<"slack/users_list"> {}
export interface SlackUsersLookupByEmailNode
  extends SlackUsersBaseNode<"slack/users_lookupByEmail"> {}
export interface SlackUsersSetPhotoNode extends SlackUsersBaseNode<"slack/users_setPhoto"> {}
export interface SlackUsersSetPresenceNode extends SlackUsersBaseNode<"slack/users_setPresence"> {}
export interface SlackUsersProfileGetNode extends SlackUsersBaseNode<"slack/users_profile_get"> {}
export interface SlackUsersProfileSetNode extends SlackUsersBaseNode<"slack/users_profile_set"> {}

export const NODE_TO_METHOD_USERS: Record<string, string> = {
  "slack/users_conversations": "users.conversations",
  "slack/users_deletePhoto": "users.deletePhoto",
  "slack/users_discoverableContacts_lookup": "users.discoverableContacts.lookup",
  "slack/users_getPresence": "users.getPresence",
  "slack/users_identity": "users.identity",
  "slack/users_info": "users.info",
  "slack/users_list": "users.list",
  "slack/users_lookupByEmail": "users.lookupByEmail",
  "slack/users_setPhoto": "users.setPhoto",
  "slack/users_setPresence": "users.setPresence",
  "slack/users_profile_get": "users.profile.get",
  "slack/users_profile_set": "users.profile.set",
};

declare module "@mvfm/core" {
  interface NodeTypeMap {
    "slack/users_conversations": SlackUsersConversationsNode;
    "slack/users_deletePhoto": SlackUsersDeletePhotoNode;
    "slack/users_discoverableContacts_lookup": SlackUsersDiscoverableContactsLookupNode;
    "slack/users_getPresence": SlackUsersGetPresenceNode;
    "slack/users_identity": SlackUsersIdentityNode;
    "slack/users_info": SlackUsersInfoNode;
    "slack/users_list": SlackUsersListNode;
    "slack/users_lookupByEmail": SlackUsersLookupByEmailNode;
    "slack/users_setPhoto": SlackUsersSetPhotoNode;
    "slack/users_setPresence": SlackUsersSetPresenceNode;
    "slack/users_profile_get": SlackUsersProfileGetNode;
    "slack/users_profile_set": SlackUsersProfileSetNode;
  }
}

interface SlackClientLike {
  apiCall(method: string, params?: Record<string, unknown>): Promise<unknown>;
}

export function createSlackUsersInterpreter(client: SlackClientLike): Interpreter {
  const handler = async function* (node: SlackUsersBaseNode) {
    const method = NODE_TO_METHOD_USERS[node.kind];
    if (!method) throw new Error(`Slack interpreter: unknown node kind "${node.kind}"`);
    const params = node.params != null ? yield* eval_(node.params) : undefined;
    return await client.apiCall(method, params);
  };

  return defineInterpreter<SlackUsersKind>()({
    "slack/users_conversations": async function* (node: SlackUsersConversationsNode) {
      return yield* handler(node);
    },
    "slack/users_deletePhoto": async function* (node: SlackUsersDeletePhotoNode) {
      return yield* handler(node);
    },
    "slack/users_discoverableContacts_lookup": async function* (
      node: SlackUsersDiscoverableContactsLookupNode,
    ) {
      return yield* handler(node);
    },
    "slack/users_getPresence": async function* (node: SlackUsersGetPresenceNode) {
      return yield* handler(node);
    },
    "slack/users_identity": async function* (node: SlackUsersIdentityNode) {
      return yield* handler(node);
    },
    "slack/users_info": async function* (node: SlackUsersInfoNode) {
      return yield* handler(node);
    },
    "slack/users_list": async function* (node: SlackUsersListNode) {
      return yield* handler(node);
    },
    "slack/users_lookupByEmail": async function* (node: SlackUsersLookupByEmailNode) {
      return yield* handler(node);
    },
    "slack/users_setPhoto": async function* (node: SlackUsersSetPhotoNode) {
      return yield* handler(node);
    },
    "slack/users_setPresence": async function* (node: SlackUsersSetPresenceNode) {
      return yield* handler(node);
    },
    "slack/users_profile_get": async function* (node: SlackUsersProfileGetNode) {
      return yield* handler(node);
    },
    "slack/users_profile_set": async function* (node: SlackUsersProfileSetNode) {
      return yield* handler(node);
    },
  });
}
