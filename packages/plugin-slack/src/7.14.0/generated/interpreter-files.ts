// AUTO-GENERATED by scripts/codegen.ts â€” do not edit

import type { Interpreter, TypedNode } from "@mvfm/core";
import { defineInterpreter, eval_ } from "@mvfm/core";
import type { SLACK_NODE_KINDS_FILES } from "./node-kinds-files";

type SlackFilesKind = (typeof SLACK_NODE_KINDS_FILES)[number];

interface SlackFilesBaseNode<K extends SlackFilesKind = SlackFilesKind> extends TypedNode<unknown> {
  kind: K;
  params?: TypedNode<Record<string, unknown>> | null;
  config: { token: string };
}

export interface SlackFilesCompleteUploadExternalNode
  extends SlackFilesBaseNode<"slack/files_completeUploadExternal"> {}
export interface SlackFilesDeleteNode extends SlackFilesBaseNode<"slack/files_delete"> {}
export interface SlackFilesGetUploadURLExternalNode
  extends SlackFilesBaseNode<"slack/files_getUploadURLExternal"> {}
export interface SlackFilesInfoNode extends SlackFilesBaseNode<"slack/files_info"> {}
export interface SlackFilesListNode extends SlackFilesBaseNode<"slack/files_list"> {}
export interface SlackFilesRevokePublicURLNode
  extends SlackFilesBaseNode<"slack/files_revokePublicURL"> {}
export interface SlackFilesSharedPublicURLNode
  extends SlackFilesBaseNode<"slack/files_sharedPublicURL"> {}
export interface SlackFilesUploadNode extends SlackFilesBaseNode<"slack/files_upload"> {}
export interface SlackFilesCommentsDeleteNode
  extends SlackFilesBaseNode<"slack/files_comments_delete"> {}
export interface SlackFilesRemoteAddNode extends SlackFilesBaseNode<"slack/files_remote_add"> {}
export interface SlackFilesRemoteInfoNode extends SlackFilesBaseNode<"slack/files_remote_info"> {}
export interface SlackFilesRemoteListNode extends SlackFilesBaseNode<"slack/files_remote_list"> {}
export interface SlackFilesRemoteRemoveNode
  extends SlackFilesBaseNode<"slack/files_remote_remove"> {}
export interface SlackFilesRemoteShareNode extends SlackFilesBaseNode<"slack/files_remote_share"> {}
export interface SlackFilesRemoteUpdateNode
  extends SlackFilesBaseNode<"slack/files_remote_update"> {}

export const NODE_TO_METHOD_FILES: Record<string, string> = {
  "slack/files_completeUploadExternal": "files.completeUploadExternal",
  "slack/files_delete": "files.delete",
  "slack/files_getUploadURLExternal": "files.getUploadURLExternal",
  "slack/files_info": "files.info",
  "slack/files_list": "files.list",
  "slack/files_revokePublicURL": "files.revokePublicURL",
  "slack/files_sharedPublicURL": "files.sharedPublicURL",
  "slack/files_upload": "files.upload",
  "slack/files_comments_delete": "files.comments.delete",
  "slack/files_remote_add": "files.remote.add",
  "slack/files_remote_info": "files.remote.info",
  "slack/files_remote_list": "files.remote.list",
  "slack/files_remote_remove": "files.remote.remove",
  "slack/files_remote_share": "files.remote.share",
  "slack/files_remote_update": "files.remote.update",
};

declare module "@mvfm/core" {
  interface NodeTypeMap {
    "slack/files_completeUploadExternal": SlackFilesCompleteUploadExternalNode;
    "slack/files_delete": SlackFilesDeleteNode;
    "slack/files_getUploadURLExternal": SlackFilesGetUploadURLExternalNode;
    "slack/files_info": SlackFilesInfoNode;
    "slack/files_list": SlackFilesListNode;
    "slack/files_revokePublicURL": SlackFilesRevokePublicURLNode;
    "slack/files_sharedPublicURL": SlackFilesSharedPublicURLNode;
    "slack/files_upload": SlackFilesUploadNode;
    "slack/files_comments_delete": SlackFilesCommentsDeleteNode;
    "slack/files_remote_add": SlackFilesRemoteAddNode;
    "slack/files_remote_info": SlackFilesRemoteInfoNode;
    "slack/files_remote_list": SlackFilesRemoteListNode;
    "slack/files_remote_remove": SlackFilesRemoteRemoveNode;
    "slack/files_remote_share": SlackFilesRemoteShareNode;
    "slack/files_remote_update": SlackFilesRemoteUpdateNode;
  }
}

interface SlackClientLike {
  apiCall(method: string, params?: Record<string, unknown>): Promise<unknown>;
}

export function createSlackFilesInterpreter(client: SlackClientLike): Interpreter {
  const handler = async function* (node: SlackFilesBaseNode) {
    const method = NODE_TO_METHOD_FILES[node.kind];
    if (!method) throw new Error(`Slack interpreter: unknown node kind "${node.kind}"`);
    const params = node.params != null ? yield* eval_(node.params) : undefined;
    return await client.apiCall(method, params);
  };

  return defineInterpreter<SlackFilesKind>()({
    "slack/files_completeUploadExternal": async function* (
      node: SlackFilesCompleteUploadExternalNode,
    ) {
      return yield* handler(node);
    },
    "slack/files_delete": async function* (node: SlackFilesDeleteNode) {
      return yield* handler(node);
    },
    "slack/files_getUploadURLExternal": async function* (node: SlackFilesGetUploadURLExternalNode) {
      return yield* handler(node);
    },
    "slack/files_info": async function* (node: SlackFilesInfoNode) {
      return yield* handler(node);
    },
    "slack/files_list": async function* (node: SlackFilesListNode) {
      return yield* handler(node);
    },
    "slack/files_revokePublicURL": async function* (node: SlackFilesRevokePublicURLNode) {
      return yield* handler(node);
    },
    "slack/files_sharedPublicURL": async function* (node: SlackFilesSharedPublicURLNode) {
      return yield* handler(node);
    },
    "slack/files_upload": async function* (node: SlackFilesUploadNode) {
      return yield* handler(node);
    },
    "slack/files_comments_delete": async function* (node: SlackFilesCommentsDeleteNode) {
      return yield* handler(node);
    },
    "slack/files_remote_add": async function* (node: SlackFilesRemoteAddNode) {
      return yield* handler(node);
    },
    "slack/files_remote_info": async function* (node: SlackFilesRemoteInfoNode) {
      return yield* handler(node);
    },
    "slack/files_remote_list": async function* (node: SlackFilesRemoteListNode) {
      return yield* handler(node);
    },
    "slack/files_remote_remove": async function* (node: SlackFilesRemoteRemoveNode) {
      return yield* handler(node);
    },
    "slack/files_remote_share": async function* (node: SlackFilesRemoteShareNode) {
      return yield* handler(node);
    },
    "slack/files_remote_update": async function* (node: SlackFilesRemoteUpdateNode) {
      return yield* handler(node);
    },
  });
}
