// AUTO-GENERATED by scripts/codegen.ts â€” do not edit

import type { Interpreter, TypedNode } from "@mvfm/core";
import { defineInterpreter, eval_ } from "@mvfm/core";
import type { SLACK_NODE_KINDS_USERGROUPS } from "./node-kinds-usergroups";

type SlackUsergroupsKind = (typeof SLACK_NODE_KINDS_USERGROUPS)[number];

interface SlackUsergroupsBaseNode<K extends SlackUsergroupsKind = SlackUsergroupsKind>
  extends TypedNode<unknown> {
  kind: K;
  params?: TypedNode<Record<string, unknown>> | null;
  config: { token: string };
}

export interface SlackUsergroupsCreateNode
  extends SlackUsergroupsBaseNode<"slack/usergroups_create"> {}
export interface SlackUsergroupsDisableNode
  extends SlackUsergroupsBaseNode<"slack/usergroups_disable"> {}
export interface SlackUsergroupsEnableNode
  extends SlackUsergroupsBaseNode<"slack/usergroups_enable"> {}
export interface SlackUsergroupsListNode extends SlackUsergroupsBaseNode<"slack/usergroups_list"> {}
export interface SlackUsergroupsUpdateNode
  extends SlackUsergroupsBaseNode<"slack/usergroups_update"> {}
export interface SlackUsergroupsUsersListNode
  extends SlackUsergroupsBaseNode<"slack/usergroups_users_list"> {}
export interface SlackUsergroupsUsersUpdateNode
  extends SlackUsergroupsBaseNode<"slack/usergroups_users_update"> {}

export const NODE_TO_METHOD_USERGROUPS: Record<string, string> = {
  "slack/usergroups_create": "usergroups.create",
  "slack/usergroups_disable": "usergroups.disable",
  "slack/usergroups_enable": "usergroups.enable",
  "slack/usergroups_list": "usergroups.list",
  "slack/usergroups_update": "usergroups.update",
  "slack/usergroups_users_list": "usergroups.users.list",
  "slack/usergroups_users_update": "usergroups.users.update",
};

declare module "@mvfm/core" {
  interface NodeTypeMap {
    "slack/usergroups_create": SlackUsergroupsCreateNode;
    "slack/usergroups_disable": SlackUsergroupsDisableNode;
    "slack/usergroups_enable": SlackUsergroupsEnableNode;
    "slack/usergroups_list": SlackUsergroupsListNode;
    "slack/usergroups_update": SlackUsergroupsUpdateNode;
    "slack/usergroups_users_list": SlackUsergroupsUsersListNode;
    "slack/usergroups_users_update": SlackUsergroupsUsersUpdateNode;
  }
}

interface SlackClientLike {
  apiCall(method: string, params?: Record<string, unknown>): Promise<unknown>;
}

export function createSlackUsergroupsInterpreter(client: SlackClientLike): Interpreter {
  const handler = async function* (node: SlackUsergroupsBaseNode) {
    const method = NODE_TO_METHOD_USERGROUPS[node.kind];
    if (!method) throw new Error(`Slack interpreter: unknown node kind "${node.kind}"`);
    const params = node.params != null ? yield* eval_(node.params) : undefined;
    return await client.apiCall(method, params);
  };

  return defineInterpreter<SlackUsergroupsKind>()({
    "slack/usergroups_create": async function* (node: SlackUsergroupsCreateNode) {
      return yield* handler(node);
    },
    "slack/usergroups_disable": async function* (node: SlackUsergroupsDisableNode) {
      return yield* handler(node);
    },
    "slack/usergroups_enable": async function* (node: SlackUsergroupsEnableNode) {
      return yield* handler(node);
    },
    "slack/usergroups_list": async function* (node: SlackUsergroupsListNode) {
      return yield* handler(node);
    },
    "slack/usergroups_update": async function* (node: SlackUsergroupsUpdateNode) {
      return yield* handler(node);
    },
    "slack/usergroups_users_list": async function* (node: SlackUsergroupsUsersListNode) {
      return yield* handler(node);
    },
    "slack/usergroups_users_update": async function* (node: SlackUsergroupsUsersUpdateNode) {
      return yield* handler(node);
    },
  });
}
